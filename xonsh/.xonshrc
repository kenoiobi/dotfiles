$PROMPT = '{BOLD_GREEN}{cwd_base}{RESET}{curr_branch: {}}{env_name} âžœ\n'
$XONSH_COLOR_STYLE = 'default'
$EDITOR="nvim"

execx($(zoxide init xonsh), 'exec', __xonsh__.ctx, filename='zoxide')

$PATH.append("$HOME/bin")
aliases["l"] = "ls -lah"
aliases["token"] = "nvim ~/drive/passwords/.token"
aliases["cd"] = "z @($args) && ls"
aliases["poweroff"] = "sudo poweroff"
aliases["reboot"] = "sudo reboot"
aliases["py"] = "python3"

def _y(args):
    tmp = $(mktemp -t "yazi-cwd.XXXXXX")
    args.append(f"--cwd-file={tmp}")
    $[yazi @(args)]
    with open(tmp) as f:
        cwd = f.read()
    if cwd != $PWD:
        cd @(cwd)
    rm -f -- @(tmp)

aliases["y"] = _y
aliases['nvm'] = """bash -c @(f'[ -s "{$HOME}/.nvm/nvm.sh" ] && . "{$HOME}/.nvm/nvm.sh" && nvm {" ".join($args)}')"""
